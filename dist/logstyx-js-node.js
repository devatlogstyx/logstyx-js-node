var F=Object.defineProperty,H=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var j=(r,e,t)=>e in r?F(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,b=(r,e)=>{for(var t in e||(e={}))U.call(e,t)&&j(r,t,e[t]);if(v)for(var t of v(e))K.call(e,t)&&j(r,t,e[t]);return r},x=(r,e)=>H(r,T(e));var m=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var O=m(h=>{h.safeParse=r=>{try{return r?JSON.parse(r):{}}catch(e){return{}}};h.num2Int=r=>isNaN(r)?0:parseInt(r)});var S=m(w=>{var{num2Int:R}=O(),B=require("crypto");w.generateSignature=(r,e,t={})=>{let a=new Date().getTime(),n=JSON.stringify(t),c=r+n+R(a),i=B.createHmac("SHA256",e).update(c).digest("hex").toUpperCase();return{timestamp:a,signature:i}}});var J=m((ne,q)=>{var G=Object.defineProperty,N=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,A=(r,e,t)=>e in r?G(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,I=(r,e)=>{for(var t in e||(e={}))M.call(e,t)&&A(r,t,e[t]);if(N)for(var t of N(e))Q.call(e,t)&&A(r,t,e[t]);return r},P=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),V=(r,e,t)=>new Promise((a,n)=>{var c=o=>{try{l(t.next(o))}catch(u){n(u)}},i=o=>{try{l(t.throw(o))}catch(u){n(u)}},l=o=>o.done?a(o.value):Promise.resolve(o.value).then(c,i);l((t=t.apply(r,e)).next())}),W=P(r=>{r.sanitizeObject=e=>Object.entries(e).reduce((t,[a,n])=>(n!=null&&n!==""&&!(Array.isArray(n)&&n.length===0)&&!(typeof n=="object"&&!Array.isArray(n)&&Object.keys(n).length===0&&n.constructor===Object)&&(t[a]=n),t),{}),r.safeParse=e=>{try{return e?JSON.parse(e):{}}catch(t){return{}}},r.normalizeArgs=e=>Array.isArray(e)?{message:JSON.stringify(e)}:typeof e=="object"?e:{message:String(e)},r.num2Int=e=>isNaN(e)?0:parseInt(e)}),X=P(r=>{var{sanitizeObject:e,normalizeArgs:t}=W();r.useLogstyx=a=>{let{projectId:n,apiKey:c,appid:i,endpoint:l="https://api.logstyx.com/v1/logs",device:o,signatureFunc:u}=a,p=e({appid:i});function z(s){p=I(I({},p),s)}function C(s){if(Array.isArray(s))for(let d of s)delete p[d];else p={}}function g(s){return V(this,arguments,function*(d,E={}){try{let y=e({timestamp:new Date().toISOString(),level:d,projectId:n,device:o,context:e(p),data:e(t(E))}),f={"Content-Type":"application/json"};if(typeof u=="function"){let{timestamp:L,signature:D}=u(n,c,y);f.signature=D,f.timestamp=L}return fetch(l,{method:"POST",body:JSON.stringify(y),headers:f})}catch(y){console.error(y)}})}return{info:s=>g("info",s),warning:s=>g("warning",s),error:s=>g("error",s),critical:s=>g("critical",s),send:g,setContext:z,clearContext:C}}}),{useLogstyx:Y}=X();q.exports=r=>Y(r)});var k=require("os"),{generateSignature:Z}=S(),_=J(),[$]=process.versions.node.split(".").map(Number);if($<18)throw new Error("Logstyx SDK requires Node.js version 18 or higher. Please upgrade your Node.js runtime.");module.exports=r=>{let e;e={type:"node",origin:null,os:k.type(),platform:k.platform(),browser:null,screen:null};let t=_(x(b({},r),{device:e,signatureFunc:Z}));if((r==null?void 0:r.captureUncaught)===!0)try{typeof process!="undefined"&&typeof window=="undefined"&&process.on("uncaughtException",a=>t.send("error",{message:a.message,stack:a.stack}))}catch(a){console.error(a)}if((r==null?void 0:r.captureUnhandledRejections)===!0)try{let a=n=>{let c=n instanceof Error?n.message:String(n),i=n instanceof Error?n.stack:void 0;t.send("error",{message:c,stack:i})};process.on("unhandledRejection",a)}catch(a){console.error(a)}return t};
